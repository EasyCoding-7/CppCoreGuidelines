


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="C++ 핵심 가이드라인 한글화 프로젝트">
      
      
        <link rel="canonical" href="http://www.cppkorea.org/CppCoreGuidelines/Interfaces/">
      
      
        <meta name="author" content="C++ Korea">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Interfaces - C++ 핵심 가이드라인</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nanum+Gothic:300,400,400i,700%7CNanum+Gothic+Coding&display=fallback">
        <style>body,input{font-family:"Nanum Gothic",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Nanum Gothic Coding",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#i" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="http://www.cppkorea.org/CppCoreGuidelines" title="C++ 핵심 가이드라인" class="md-header-nav__button md-logo" aria-label="C++ 핵심 가이드라인">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            C++ 핵심 가이드라인
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Interfaces
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="http://github.com/CppKorea/CppCoreGuidelines/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CppKorea/CppCoreGuidelines
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://www.cppkorea.org/CppCoreGuidelines" title="C++ 핵심 가이드라인" class="md-nav__button md-logo" aria-label="C++ 핵심 가이드라인">
      
  <img src="../images/logo.svg" alt="logo">

    </a>
    C++ 핵심 가이드라인
  </label>
  
    <div class="md-nav__source">
      
<a href="http://github.com/CppKorea/CppCoreGuidelines/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CppKorea/CppCoreGuidelines
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../home/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Introduction" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Introduction/" title="In: 소개" class="md-nav__link">
      <a name="S-introduction"></a>In: 소개
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      References
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="References" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        References
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../References/" title="RF: 레퍼런스" class="md-nav__link">
      <a name="S-references"></a>RF: 레퍼런스
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Sections
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Sections" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Sections
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Class/" title="Class" class="md-nav__link">
      Class
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Concurrency/" title="Concurrency" class="md-nav__link">
      Concurrency
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Const/" title="Const" class="md-nav__link">
      Const
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CPL/" title="C-Style" class="md-nav__link">
      C-Style
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Errors/" title="Errors" class="md-nav__link">
      Errors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Expr/" title="Expr" class="md-nav__link">
      Expr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Functions/" title="Functions" class="md-nav__link">
      Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../GSL/" title="GSL" class="md-nav__link">
      GSL
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Interfaces
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Interfaces" class="md-nav__link md-nav__link--active">
      Interfaces
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i1-explicit" class="md-nav__link">
    I.1: 인터페이스는 명확하게(explicit) 작성하라
  </a>
  
    <nav class="md-nav" aria-label="I.1: 인터페이스는 명확하게(explicit) 작성하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_1" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i2-const" class="md-nav__link">
    I.2: const가 아닌 전역변수를 지양하라
  </a>
  
    <nav class="md-nav" aria-label="I.2: const가 아닌 전역변수를 지양하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_1" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_1" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warning" class="md-nav__link">
    Warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_1" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i3" class="md-nav__link">
    I.3: 싱글톤 패턴을 지양하라
  </a>
  
    <nav class="md-nav" aria-label="I.3: 싱글톤 패턴을 지양하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_2" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_1" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_2" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i4" class="md-nav__link">
    I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라
  </a>
  
    <nav class="md-nav" aria-label="I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_3" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-dont" class="md-nav__link">
    Example, don't
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_2" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_2" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_3" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-good" class="md-nav__link">
    Example, good
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_3" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i5" class="md-nav__link">
    I.5: (하나라도 있다면) 사전 조건을 기술하라
  </a>
  
    <nav class="md-nav" aria-label="I.5: (하나라도 있다면) 사전 조건을 기술하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_4" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references_1" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_5" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_6" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_4" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i6-pre-condition-expects" class="md-nav__link">
    I.6: 사전 조건(pre-condition)을 표현하고 싶다면 Expects()를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.6: 사전 조건(pre-condition)을 표현하고 싶다면 Expects()를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_5" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_7" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_8" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_9" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_10" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_5" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i7-post-condition" class="md-nav__link">
    I.7: 사후조건(post-condition)을 기술하라
  </a>
  
    <nav class="md-nav" aria-label="I.7: 사후조건(post-condition)을 기술하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_6" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_4" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_5" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_11" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_12" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_4" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_13" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_6" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i8-ensures" class="md-nav__link">
    I.8: 사후 조건을 표현하고 싶다면 Ensures()를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.8: 사후 조건을 표현하고 싶다면 Ensures()를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_7" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_5" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_14" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_3" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_15" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_7" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i9-concept" class="md-nav__link">
    I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라
  </a>
  
    <nav class="md-nav" aria-label="I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_8" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_6" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_16" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_1" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_8" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i10" class="md-nav__link">
    I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_9" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_7" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_17" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_2" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_4" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_18" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_2" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_9" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i11-t-t" class="md-nav__link">
    I.11: 원시 포인터(T*) 혹은 참조(T&amp;)를 사용해 소유권을 전달하지 마라
  </a>
  
    <nav class="md-nav" aria-label="I.11: 원시 포인터(T*) 혹은 참조(T&amp;)를 사용해 소유권을 전달하지 마라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_10" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_8" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_5" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_19" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_3" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_10" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i12-null-not_null" class="md-nav__link">
    I.12: null이 되어선 안되는 포인터는 not_null로 선언하라
  </a>
  
    <nav class="md-nav" aria-label="I.12: null이 되어선 안되는 포인터는 not_null로 선언하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_11" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_9" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_20" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_21" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_11" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i13" class="md-nav__link">
    I.13: 배열을 단일 포인터로 전달하지 마라
  </a>
  
    <nav class="md-nav" aria-label="I.13: 배열을 단일 포인터로 전달하지 마라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_12" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_10" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_6" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_6" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_7" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_3" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_12" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i22" class="md-nav__link">
    I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라
  </a>
  
    <nav class="md-nav" aria-label="I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_13" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_11" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_22" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_13" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i23" class="md-nav__link">
    I.23: 함수 인자 개수를 최소로 유지하라
  </a>
  
    <nav class="md-nav" aria-label="I.23: 함수 인자 개수를 최소로 유지하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_14" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    Discussion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_12" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_13" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_23" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_8" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_14" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i24" class="md-nav__link">
    I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라
  </a>
  
    <nav class="md-nav" aria-label="I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_15" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_7" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_4" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_9" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_10" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_15" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i25-hierarchy" class="md-nav__link">
    I.25: 클래스 계층(hierarchy)에 대한 인터페이스로 추상 클래스를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.25: 클래스 계층(hierarchy)에 대한 인터페이스로 추상 클래스를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_16" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_8" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_16" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i26-abi-c" class="md-nav__link">
    I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_17" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_5" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_6" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_24" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_17" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i27-stable-abi-pimpl-idiom" class="md-nav__link">
    I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라
  </a>
  
    <nav class="md-nav" aria-label="I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_18" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_14" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_18" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i30" class="md-nav__link">
    I.30: 규칙을 위반하는 코드는 캡슐화하라
  </a>
  
    <nav class="md-nav" aria-label="I.30: 규칙을 위반하는 코드는 캡슐화하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_19" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_15" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_19" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Naming/" title="Naming" class="md-nav__link">
      Naming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Not/" title="Not-Rule" class="md-nav__link">
      Not-Rule
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Performance/" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Philosophy/" title="Philosophy" class="md-nav__link">
      Philosophy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Profile/" title="Profile" class="md-nav__link">
      Profile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SL/" title="Standard Library" class="md-nav__link">
      Standard Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Source/" title="Source" class="md-nav__link">
      Source
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Unclassified/" title="Unclassified" class="md-nav__link">
      Unclassified
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Appendix
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Appendix" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Appendix
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../appendix/Modernizing/" title="Modernizing" class="md-nav__link">
      Modernizing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../appendix/Tools/" title="Tools" class="md-nav__link">
      Tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i1-explicit" class="md-nav__link">
    I.1: 인터페이스는 명확하게(explicit) 작성하라
  </a>
  
    <nav class="md-nav" aria-label="I.1: 인터페이스는 명확하게(explicit) 작성하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_1" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i2-const" class="md-nav__link">
    I.2: const가 아닌 전역변수를 지양하라
  </a>
  
    <nav class="md-nav" aria-label="I.2: const가 아닌 전역변수를 지양하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_1" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_1" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#warning" class="md-nav__link">
    Warning
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_1" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i3" class="md-nav__link">
    I.3: 싱글톤 패턴을 지양하라
  </a>
  
    <nav class="md-nav" aria-label="I.3: 싱글톤 패턴을 지양하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_2" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_1" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_2" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i4" class="md-nav__link">
    I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라
  </a>
  
    <nav class="md-nav" aria-label="I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_3" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-dont" class="md-nav__link">
    Example, don't
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_2" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_2" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_3" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-good" class="md-nav__link">
    Example, good
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_3" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i5" class="md-nav__link">
    I.5: (하나라도 있다면) 사전 조건을 기술하라
  </a>
  
    <nav class="md-nav" aria-label="I.5: (하나라도 있다면) 사전 조건을 기술하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_4" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references_1" class="md-nav__link">
    References
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_5" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_6" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_4" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i6-pre-condition-expects" class="md-nav__link">
    I.6: 사전 조건(pre-condition)을 표현하고 싶다면 Expects()를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.6: 사전 조건(pre-condition)을 표현하고 싶다면 Expects()를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_5" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_7" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_8" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_9" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_10" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_5" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i7-post-condition" class="md-nav__link">
    I.7: 사후조건(post-condition)을 기술하라
  </a>
  
    <nav class="md-nav" aria-label="I.7: 사후조건(post-condition)을 기술하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_6" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_4" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_5" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_11" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_12" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_4" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_13" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_6" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i8-ensures" class="md-nav__link">
    I.8: 사후 조건을 표현하고 싶다면 Ensures()를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.8: 사후 조건을 표현하고 싶다면 Ensures()를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_7" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_5" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_14" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_3" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_15" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_7" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i9-concept" class="md-nav__link">
    I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라
  </a>
  
    <nav class="md-nav" aria-label="I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_8" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_6" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_16" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_1" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_8" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i10" class="md-nav__link">
    I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_9" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_7" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_17" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_2" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_4" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_18" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_2" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_9" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i11-t-t" class="md-nav__link">
    I.11: 원시 포인터(T*) 혹은 참조(T&amp;)를 사용해 소유권을 전달하지 마라
  </a>
  
    <nav class="md-nav" aria-label="I.11: 원시 포인터(T*) 혹은 참조(T&amp;)를 사용해 소유권을 전달하지 마라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_10" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_8" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_5" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_19" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#see-also_3" class="md-nav__link">
    See Also
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_10" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i12-null-not_null" class="md-nav__link">
    I.12: null이 되어선 안되는 포인터는 not_null로 선언하라
  </a>
  
    <nav class="md-nav" aria-label="I.12: null이 되어선 안되는 포인터는 not_null로 선언하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_11" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_9" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_20" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_21" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_11" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i13" class="md-nav__link">
    I.13: 배열을 단일 포인터로 전달하지 마라
  </a>
  
    <nav class="md-nav" aria-label="I.13: 배열을 단일 포인터로 전달하지 마라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_12" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_10" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_6" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_6" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_7" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_3" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_12" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i22" class="md-nav__link">
    I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라
  </a>
  
    <nav class="md-nav" aria-label="I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_13" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_11" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_22" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_13" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i23" class="md-nav__link">
    I.23: 함수 인자 개수를 최소로 유지하라
  </a>
  
    <nav class="md-nav" aria-label="I.23: 함수 인자 개수를 최소로 유지하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_14" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    Discussion
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_12" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_13" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_23" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_8" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_14" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i24" class="md-nav__link">
    I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라
  </a>
  
    <nav class="md-nav" aria-label="I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_15" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_7" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_4" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_9" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative_10" class="md-nav__link">
    Alternative
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_15" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i25-hierarchy" class="md-nav__link">
    I.25: 클래스 계층(hierarchy)에 대한 인터페이스로 추상 클래스를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.25: 클래스 계층(hierarchy)에 대한 인터페이스로 추상 클래스를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_16" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-bad_8" class="md-nav__link">
    Example, bad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_16" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i26-abi-c" class="md-nav__link">
    I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라
  </a>
  
    <nav class="md-nav" aria-label="I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_17" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_5" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception_6" class="md-nav__link">
    Exception
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_24" class="md-nav__link">
    Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_17" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i27-stable-abi-pimpl-idiom" class="md-nav__link">
    I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라
  </a>
  
    <nav class="md-nav" aria-label="I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_18" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_14" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notes" class="md-nav__link">
    Notes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_18" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i30" class="md-nav__link">
    I.30: 규칙을 위반하는 코드는 캡슐화하라
  </a>
  
    <nav class="md-nav" aria-label="I.30: 규칙을 위반하는 코드는 캡슐화하라">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_19" class="md-nav__link">
    Reason
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_15" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement_19" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="http://github.com/CppKorea/CppCoreGuidelines/edit/master/docs/Interfaces.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="i"><a name="S-interfaces"></a>I: 인터페이스</h1>
<p>인터페이스는 프로그램 부분 사이의 계약이다. 
서비스의 공급자와 사용자가 기대하는 바를 정확하게 기술하는 것이 핵심이다.
좋은 인터페이스(이해하기 쉽고, 효율적인 사용을 장려하고, 쉽게 오류가 발생하지 않고, 테스트를 지원하는 등)는 아마도 코드 구성 중에서 가장 중요한 요소 중 하나다.</p>
<p>인터페이스 규칙 요약:</p>
<ul>
<li><a href="#Ri-explicit">I.1: 인터페이스는 명확하게(explicit) 작성하라</a></li>
<li><a href="#Ri-global">I.2: <code>const</code>가 아닌 전역변수를 지양하라</a></li>
<li><a href="#Ri-singleton">I.3: 싱글톤 패턴을 지양하라</a></li>
<li><a href="#Ri-typed">I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라</a></li>
<li><a href="#Ri-pre">I.5: (하나라도 있다면) 사전 조건을 기술하라</a></li>
<li><a href="#Ri-expects">I.6: 사전 조건을 표현하고 싶다면 <code>Expects()</code>를 사용하라</a></li>
<li><a href="#Ri-post">I.7: 사후 조건을 기술하라</a></li>
<li><a href="#Ri-ensures">I.8: 사후 조건을 표현하고 싶다면 <code>Ensures()</code>를 사용하라</a></li>
<li><a href="#Ri-concepts">I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라</a></li>
<li><a href="#Ri-except">I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라</a></li>
<li><a href="#Ri-raw">I.11: 원시 포인터(<code>T*</code>) 혹은 참조(<code>T&amp;</code>)를 사용해 소유권을 전달하지 마라</a></li>
<li><a href="#Ri-nullptr">I.12: null이 되어선 안되는 포인터는 <code>not_null</code>로 선언하라</a></li>
<li><a href="#Ri-array">I.13: 배열을 단일 포인터로 전달하지 마라</a></li>
<li><a href="#Ri-global-init">I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라</a></li>
<li><a href="#Ri-nargs">I.23: 함수 인자 개수를 최소로 유지하라</a></li>
<li><a href="#Ri-unrelated">I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라</a></li>
<li><a href="#Ri-abstract">I.25: 클래스 계층에 대한 인터페이스로 추상 클래스를 사용하라</a></li>
<li><a href="#Ri-abi">I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라</a></li>
<li><a href="#Ri-pimpl">I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라</a></li>
<li><a href="#Ri-encapsulate">I.30: 규칙을 위반하는 코드는 캡슐화하라</a></li>
</ul>
<p><strong>참고할 만한 내용</strong>:</p>
<ul>
<li><a href="../Functions/">F: 함수(Functions)</a></li>
<li><a href="../Class/">C.concrete: 실제 타입(Concrete types)</a></li>
<li><a href="../Class/">C.hier: 클래스 계층(Class hierarchies)</a></li>
<li><a href="../Class/">C.over: 오버로딩과 오버로딩 된 연산자(Overloading and overloaded operators)</a></li>
<li><a href="../Class/">C.con: 컨테이너와 다른 리소스 핸들(Containers and other resource handles)</a></li>
<li><a href="../Errors/">E: 오류 처리(Error handling)</a></li>
<li><a href="../Templates/">T: 템플릿과 제너릭 프로그래밍(Templates and generic programming)</a></li>
</ul>
<h3 id="i1-explicit"><a name="Ri-explicit"></a>I.1: 인터페이스는 명확하게(explicit) 작성하라</h3>
<h5 id="reason">Reason</h5>
<p>정확성. 인터페이스에 언급되지 않은 가정은 간과되기 쉽고 테스트하기 어렵다.</p>
<h5 id="example-bad">Example, bad</h5>
<p>전역 (네임스페이스 범위에 있는) 변수를 통해 함수의 행동을 제어하는 것은 암시적이고 혼란스럽다.</p>
<p>예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">round</span><span class="p">(</span><span class="kt">double</span> <span class="n">d</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">round_up</span><span class="p">)</span> <span class="o">?</span> <span class="n">ceil</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">:</span> <span class="n">d</span><span class="p">;</span>    <span class="c1">// 이렇게 하면 안된다: &quot;보이지 않는&quot; 의존성이 있다</span>
    <span class="p">}</span>
</code></pre></div>


<p><code>round(7.2)</code>를 두 번 호출해서 서로 다른 결과가 발생한다면 호출하는 입장에서는 함수의 의미를 명확하게 알지 못할 것이다.</p>
<h5 id="exception">Exception</h5>
<p>우리는 때때로 환경 변수를 통해 연산을 세세하게 제어하기도 한다. 예컨대, 일반 출력과 상세한(verbose) 출력중 하나를 사용하도록 하거나, 디버그 혹은 최적화를 선택하기도 한다.
이런 비-지역적인(non-local) 제어를 사용하면 잠재적으로 혼란의 소지가 있지만, 대신 구현 세부사항을 제어할 수 있다. 
이러한 제어를 사용하지 않았다면 의미구조가 고정되었을 것이다.</p>
<h5 id="example-bad_1">Example, bad</h5>
<p><code>errno</code>와 같이 전역 변수를 통해 오류를 보고하는 것은 무시되기 쉽다.</p>
<p>예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="c1">// 이렇게 하면 안된다: printf의 반환값을 검사하지 않는다</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="s">&quot;logging: %d %d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
</code></pre></div>


<p>만약 연결(connection)이 다운되어 로그가 만들어지지 않는다면 어떨까?</p>
<h5 id="alternative">Alternative</h5>
<p>예외를 발생시켜라. 예외는 무시할 수 없다.</p>
<p><strong>Alternative Formulation</strong>:<br />
전역 또는 암시적 상태의 값을 통해 인터페이스로 정보가 전달되는 것을 피하라. <code>const</code>가 아닌 멤버 함수는 개체의 상태를 통해 다른 멤버 함수에게 정보를 전달한다는 점을 참고하라.</p>
<p><strong>Alternative Formulation</strong>:<br />
인터페이스는 함수나 함수의 집합이어야 한다. 함수는 템플릿 함수일 수 있고 함수 집합은 클래스나 클래스 템플릿일 수 있다.</p>
<h5 id="enforcement">Enforcement</h5>
<ul>
<li>(간단함) 함수는 네임스페이스 범위에서 선언된 변수 값에 따라 제어 흐름을 결정해서는 안된다</li>
<li>(간단함) 함수는 네임스페이스 범위에서 선언된 변수에 값을 저장해서는 안된다</li>
</ul>
<h3 id="i2-const"><a name="Ri-global"></a>I.2: <code>const</code>가 아닌 전역변수를 지양하라</h3>
<h5 id="reason_1">Reason</h5>
<p><code>const</code>가 아닌 전역 변수는 의존성을 숨기고 예측하지 못한 변화에 의존하게 만든다.</p>
<h5 id="example">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="k">struct</span> <span class="n">Data</span> <span class="p">{</span>
        <span class="c1">// ... lots of stuff ...</span>
    <span class="p">}</span> <span class="n">data</span><span class="p">;</span>            <span class="c1">// non-const data</span>

    <span class="kt">void</span> <span class="nf">compute</span><span class="p">()</span>     <span class="c1">// don&#39;t</span>
    <span class="p">{</span>
        <span class="c1">// ... use `data` ...</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">output</span><span class="p">()</span>     <span class="c1">// don&#39;t</span>
    <span class="p">{</span>
        <span class="c1">// ... use `data` ...</span>
    <span class="p">}</span>
</code></pre></div>


<p>또 어디서 <code>data</code>를 수정하는지 알 수 있겠는가?</p>
<h5 id="note">Note</h5>
<p>전역 <strong>상수</strong>는 유용하다.</p>
<h5 id="note_1">Note</h5>
<p>전역 변수에 반하는 규칙은 네임스페이스 범위의 변수들에도 동일하게 적용된다.</p>
<h5 id="alternative_1">Alternative</h5>
<p>복사를 피하기 위해 전역 변수(좀 더 일반화하자면 네임스페이스 범위의 데이터)를 사용한다면 <code>const</code> 레퍼런스로 개체를 전달하는 것을 고려하라.
다른 해결책은 개체의 상태로서의 데이터와 멤버 함수로서의 연산을 정의하는 것이다.</p>
<h5 id="warning">Warning</h5>
<p>데이터 경합(data race)을 조심하라. 하나의 스레드가 실행되는 동안 다른 스레드가 전역 데이터(또는 레퍼런스로 전달된 데이터)에 접근하려고 한다면, 데이터 경합이 발생할 수 있다.
변경 가능한(mutable) 데이터에 대한 포인터나 참조는 언제나 데이터 경합의 가능성이 있다.</p>
<h5 id="note_2">Note</h5>
<p>변경할 수 없는 데이터에 대해서는 경합 조건(race condition)이 생기지 않는다.</p>
<h5 id="references">References</h5>
<p><a href="../Functions/#SS-call">함수 호출에 대한 규칙</a></p>
<h5 id="note_3">Note</h5>
<p>이 규칙은 "지양하라"는 것이지, "사용하지 마라"가 아니다. 물론 (드물게) <code>cin</code>, <code>cout</code>, 그리고 <code>cerr</code> 같은 예외가 있을 것이다. </p>
<h5 id="enforcement_1">Enforcement</h5>
<p>(간단함) 네임스페이스 범위 내에 정의된 <code>const</code>가 아닌 변수에 대해서 모두 보고한다.</p>
<h3 id="i3"><a name="Ri-singleton"></a>I.3: 싱글톤 패턴을 지양하라</h3>
<h5 id="reason_2">Reason</h5>
<p>싱글톤은 기본적으로 복잡한 전역 개체이다.</p>
<h5 id="example_1">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">Singleton</span> <span class="p">{</span>
        <span class="c1">// ... 오직 하나만 생성되었고, 적절하게 초기화 되었는지 등을 확신하기 위해서</span>
        <span class="c1">// 많은 것들이 필요하다.</span>
    <span class="p">};</span>
</code></pre></div>


<p>싱글톤 아이디어에는 많은 변형이 있다.
이는 문제의 일부일 뿐이다.</p>
<h5 id="note_4">Note</h5>
<p>전역 개체가 변경되지 않게 하려면, <code>const</code>나 <code>constexpr</code>로 선언하라.</p>
<h5 id="exception_1">Exception</h5>
<p>제일 단순한 "싱글톤"(싱글톤으로 생각되지 않을 정도로 간단한)을 사용해 처음 사용시 초기화를 할 수 있다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">X</span><span class="o">&amp;</span> <span class="n">myX</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="n">X</span> <span class="n">my_x</span> <span class="p">{</span><span class="mi">3</span><span class="p">};</span>
        <span class="k">return</span> <span class="n">my_x</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<blockquote>
<p>역주: Scott Meyers Singleton으로도 알려져 있습니다.</p>
</blockquote>
<p>이 방법은 초기화 순서와 관련된 문제에 대해 가장 효과적인 해결책 중 하나다.
다중 스레드 환경에서, 정적 개체의 초기화는 경합 조건을 유발하지 않는다.
(단, 생성자 내에서 공유 개체에 부주의하게 접근하지 않아야 한다.)</p>
<p>지역 <code>static</code> 변수의 초기화는 경쟁 상태의 가능성이 없다. 하지만, <code>X</code>의 소멸이 동기화가 필요한 연산을 포함한다면 조금 더 복잡한 해결책을 사용해야 한다. 예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">X</span><span class="o">&amp;</span> <span class="n">myX</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">auto</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">X</span> <span class="p">{</span><span class="mi">3</span><span class="p">};</span>
        <span class="k">return</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>  <span class="c1">// potential leak</span>
    <span class="p">}</span>
</code></pre></div>


<p>이 경우 누군가 해당 개체를 스레드 안전한 방법으로 <code>delete</code>해야 한다.
이는 오류를 만들기 쉽기 때문에, 이 방법은 아래와 같은 조건이 아니면 사용되지 않는다.</p>
<ul>
<li><code>myX</code> 가 다중 스레드 환경에서 실행되는 코드이며,</li>
<li><code>X</code> 개체가 소멸되어야만 하며(가령, 어떤 자원을 해제하기 때문에),</li>
<li><code>X</code>의 소멸자 코드가 동기화 되어야만 한다.</li>
</ul>
<p>하나의 개체만 생성해야 하는 클래스로 싱글톤을 정의한다면 <code>myX</code>와 같은 함수는 싱글톤이 아니다. 그리고 이 유용한 테크닉은 싱글톤이 아닌 규칙에 대한 예외는 아니다.</p>
<h5 id="enforcement_2">Enforcement</h5>
<p>일반적으로 매우 힘들다.</p>
<ul>
<li><code>singleton</code>을 포함하는 이름을 가진 클래스를 찾는다</li>
<li>개체를 세거나 생성자를 검사해 단일 개체만 만들어진 클래스를 찾는다</li>
<li>만약 클래스 <code>X</code>가 public static 함수를 가진다면, 그리고 해당 함수 안에서 <code>X</code>타입의 static 변수의 포인터나 참조를 반환한다면, 금지하라.</li>
</ul>
<h3 id="i4"><a name="Ri-typed"></a>I.4: 인터페이스가 타입 시스템을 정확하고 엄격하게 준수하도록 만들어라</h3>
<h5 id="reason_3">Reason</h5>
<p>타입은 가장 단순하지만 최고의 문서이기도 하다. 잘 정의된 의미를 갖고 있고, 컴파일 타임 검사가 보장된다.</p>
<p>또한 정확하게 타입을 사용하는 코드는 더 잘 최적화된다.</p>
<h5 id="example-dont">Example, don't</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">pass</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">data</span><span class="p">);</span>    <span class="c1">// void* 가 무엇을 의미하는지, 어떻게 사용되는지 알 수 없다(suspicious)</span>
</code></pre></div>


<p>이제 피호출자에서 올바른 타입으로 사용하기 위해 <code>data</code> 포인터를 캐스팅해야 한다. 하지만 오류가 발생하기 쉽고, 구질구질하다.
특히 인터페이스에서 <code>void*</code>를 피하라.
대신 베이스 클래스를 가리키는 포인터나 <code>variant</code> 사용을 고려하라.</p>
<h5 id="alternative_2">Alternative</h5>
<p>때때로 템플릿 매개 변수는 <code>void*</code>를 제거하고 <code>T*</code>나 <code>T&amp;</code>로 변환할 수 있다.
제네릭 코드에서 이렇게 사용되는 <code>T</code>들은 일반적인 혹은 컨셉(Concept)로 제한된 템플릿 인자일 수 있다.</p>
<h5 id="example-bad_2">Example, bad</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">draw_rect</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>   <span class="c1">// great opportunities for mistakes</span>

    <span class="n">draw_rect</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>          <span class="c1">// what does 10, 20 mean?</span>
</code></pre></div>


<p><code>int</code>는 임의 형태의 정보를 전달할 수 있어서, <code>int</code>들이 각각 어떤 의미를 갖는지를 유추해야 한다.
아마도 처음 두 <code>int</code>는 <code>x</code>, <code>y</code> 좌표일 것 같지만, 나머지 두 <code>int</code>는 무엇을 의미할까?<br />
주석이나 매개 변수 이름이 도움을 줄 수 있지만, 명확히 할 수 있다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">draw_rectangle</span><span class="p">(</span><span class="n">Point</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">Point</span> <span class="n">bottom_right</span><span class="p">);</span>
    <span class="kt">void</span> <span class="nf">draw_rectangle</span><span class="p">(</span><span class="n">Point</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">Size</span> <span class="n">height_width</span><span class="p">);</span>

    <span class="n">draw_rectangle</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Point</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">});</span>  <span class="c1">// two corners</span>
    <span class="n">draw_rectangle</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Size</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">});</span>   <span class="c1">// one corner and a (height, width) pair</span>
</code></pre></div>


<p>분명히 정적 타입 시스템을 통해 모든 오류를 잡아낼 수는 없다.
(예를 들어, 첫번째 인자가 왼쪽 상단에 있는 점이라는 사실은 이름이나 주석 등을 통해 편의상 정해져 있을 뿐이다.)</p>
<h5 id="example-bad_3">Example, bad</h5>
<p>다음 예제에서 인터페이스만 보고는 <code>time_to_blink</code>이 무엇을 의미하는지 잘 모르겠다. 초를 의미할까? 밀리초를 의미할까?</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">blink_led</span><span class="p">(</span><span class="kt">int</span> <span class="n">time_to_blink</span><span class="p">)</span> <span class="c1">// 나쁜 코드 -- 시간의 단위를 알 수 없다</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
        <span class="c1">// time_to_blink로 무언가 한다</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">use</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">blink_led</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="example-good">Example, good</h5>
<p>C++11에 도입된 <code>std::chrono::duration</code> 타입은 지속 시간의 단위를 명시적으로 표현하는데 도움이 된다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">blink_led</span><span class="p">(</span><span class="n">milliseconds</span> <span class="n">time_to_blink</span><span class="p">)</span> <span class="c1">// 좋은 코드 -- 단위를 명확히 알 수 있다</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
        <span class="c1">// time_to_blink로 무언가 한다</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">use</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">blink_led</span><span class="p">(</span><span class="mi">1500</span><span class="n">ms</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>


<p>어떤 종류의 지속 시간의 단위도 허용하도록 함수를 다음과 같이 작성할 수도 있다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">rep</span><span class="p">,</span> <span class="k">class</span> <span class="nc">period</span><span class="o">&gt;</span>
    <span class="kt">void</span> <span class="n">blink_led</span><span class="p">(</span><span class="n">duration</span><span class="o">&lt;</span><span class="n">rep</span><span class="p">,</span> <span class="n">period</span><span class="o">&gt;</span> <span class="n">time_to_blink</span><span class="p">)</span> <span class="c1">// 좋은 코드 -- 어떤 단위로도 사용할 수 있다</span>
    <span class="p">{</span>
        <span class="c1">// millisecond가 가장 정밀한 단위라고 가정한다</span>
        <span class="k">auto</span> <span class="n">milliseconds_to_blink</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">time_to_blink</span><span class="p">);</span>
        <span class="c1">// ...</span>
        <span class="c1">// milliseconds_to_blink로 무언가 한다</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">use</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">blink_led</span><span class="p">(</span><span class="mi">2</span><span class="n">s</span><span class="p">);</span>
        <span class="n">blink_led</span><span class="p">(</span><span class="mi">1500</span><span class="n">ms</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="enforcement_3">Enforcement</h5>
<ul>
<li>(간단함) <code>void*</code>를 매개 변수나 리턴 타입으로 사용한다면 보고한다</li>
<li>(간단함) 하나 이상의 <code>bool</code> 매개 변수를 사용한다면 보고한다</li>
<li>(잘하기 어려움) 다수의 내장 타입(primitive type) 인자를 갖는 함수를 찾는다</li>
</ul>
<h3 id="i5"><a name="Ri-pre"></a>I.5: (하나라도 있다면) 사전 조건을 기술하라</h3>
<h5 id="reason_4">Reason</h5>
<p>전달 인자(argument)는 피호출자에서 적절한 사용을 제한할 수 있는 의미를 갖는다.</p>
<h5 id="example_2">Example</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">double</span> <span class="nf">sqrt</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">);</span>
</code></pre></div>


<p>여기서 <code>x</code>는 반드시 음수가 아니어야 한다. 타입 시스템으로는 이를 (있는 그대로 쉽게) 표현할 수 없기 때문에, 다른 수단을 사용해야 한다.
예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">double</span> <span class="nf">sqrt</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">);</span> <span class="c1">// x must be nonnegative</span>
</code></pre></div>


<p>일부 사전 조건은 단정문(assertion)으로 표현하기도 한다.
예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">double</span> <span class="nf">sqrt</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="n">Expects</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span> <span class="cm">/* ... */</span> <span class="p">}</span>
</code></pre></div>


<p>이상적으로 <code>Expects(x &gt;= 0)</code> 조건이 <code>sqrt()</code>의 인터페이스에 일부분이 되는게 가장 좋지만 그렇게 하기는 쉽지 않다. 따라서 지금은 함수 정의부(함수 본문)에 위치시킨다.</p>
<h5 id="references_1">References</h5>
<p><code>Expects()</code>는 <a href="#./GSL.mdS-gsl">GSL</a>에 기술되어 있다.</p>
<h5 id="note_5">Note</h5>
<p><code>Excepts(p != nullptr);</code>처럼 요구 사항을 정확히(formal) 명세하는 것을 선호하라.
불가능하다면, <code>// the sequence [p:q) is ordered using &lt;</code>와 같이 주석을 사용하라.</p>
<h5 id="note_6">Note</h5>
<p>대부분의 멤버 함수는 클래스의 불변 조건(invariant) 중 일부에 해당하는 선행 조건을 갖고 있다.
해당 불변 조건은 생성자에서 구성되는데 클래스 외부로부터 호출되는 모든 멤버 함수를 통해 재구성(reestablish)되어야 한다.
이를 각 멤버 함수마다 언급할 필요는 없다.</p>
<h5 id="enforcement_4">Enforcement</h5>
<p>(적용 불가능)</p>
<h5 id="see-also">See Also</h5>
<p>포인터 전달에 대한 규칙. ???</p>
<h3 id="i6-pre-condition-expects"><a name="Ri-expects"></a>I.6: 사전 조건(pre-condition)을 표현하고 싶다면 <code>Expects()</code>를 사용하라</h3>
<h5 id="reason_5">Reason</h5>
<p>사전 조건임을 명확하게 표시하고 툴 사용을 가능하게 한다.</p>
<h5 id="example_3">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">area</span><span class="p">(</span><span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Expects</span><span class="p">(</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>            <span class="c1">// good</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">height</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">width</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">my_error</span><span class="p">();</span>   <span class="c1">// obscure</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="note_7">Note</h5>
<p>사전 조건은 <code>if</code>문, <code>assert()</code>문, 주석문 등으로 기술할 수 있다.
하지만 이런 구문은 일반 코드와 구분, 갱신하거나 툴로 조작하기 어렵고 잘못된 의미를 가질 수도 있다. (디버그 모드일 때는 중단시키고, 릴리즈 모드일때는 검사하고 싶은가?)</p>
<h5 id="note_8">Note</h5>
<p>사전 조건은 구현 부분보다는 인터페이스 부분에 포함시켜야 한다. 하지만 아직은 그렇게 할 수 있는 언어 기능이 없다.
언어에서 이를 지원할 수 있게 된다면 (참고: <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0380r1.pdf">contract 제안서</a>) 표준에 맞는 사전조건, 사후조건, 단정문을 적용하게 될 것이다.</p>
<h5 id="note_9">Note</h5>
<p><code>Expects()</code>은 알고리즘 중간에 조건을 검사하는데 사용할 수도 있다.</p>
<h5 id="note_10">Note</h5>
<p><code>unsigned</code>를 사용하는 것은 <a href="../Expr/#Res-nonnegative">값이 음수가 아니라고 보장하는</a> 문제를 회피하는 좋은 방법이 아니다.</p>
<h5 id="enforcement_5">Enforcement</h5>
<p>(적용 불가능) 사전 조건이 단정될 수 있는 다양한 방법을 찾는 것은 실현 가능하지 않다. 쉽게 식별할 수 있는 것들에 대해 경고(<code>assert()</code>)를 할 수 있는 언어 기능이 없다면 의심의 여지가 생길 수 밖에 없다.</p>
<h3 id="i7-post-condition"><a name="Ri-post"></a>I.7: 사후조건(post-condition)을 기술하라</h3>
<h5 id="reason_6">Reason</h5>
<p>결과에 대해 잘못 이해하고 있는 부분과 잘못된 구현을 찾아내기 위해서다.</p>
<h5 id="example-bad_4">Example, bad</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">area</span><span class="p">(</span><span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">height</span> <span class="o">*</span> <span class="n">width</span><span class="p">;</span> <span class="p">}</span>  <span class="c1">// bad</span>
</code></pre></div>


<p>여기서 부주의하게 높이와 폭이 양수여야 한다는 사전 조건 명세를 빠뜨렸다.
역시 넓이를 구하는 알고리즘(<code>height * width</code>)이 정수의 최댓값보다 클 수 있다는 사후 조건 명세를 빠뜨렸다.
오버플로우가 발생할 수 있다.</p>
<p>다음 사용을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">area</span><span class="p">(</span><span class="kt">int</span> <span class="n">height</span><span class="p">,</span> <span class="kt">int</span> <span class="n">width</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">auto</span> <span class="n">res</span> <span class="o">=</span> <span class="n">height</span> <span class="o">*</span> <span class="n">width</span><span class="p">;</span>
        <span class="n">Ensures</span><span class="p">(</span><span class="n">res</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="example-bad_5">Example, bad</h5>
<p>악명 높은 보안 버그를 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// 문제가 있다</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">MAX</span><span class="p">];</span>
        <span class="c1">// ...</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
    <span class="p">}</span>
</code></pre></div>


<p>버퍼가 초기화되어야 하고 최적화하면서 중복되는 <code>memset()</code>의 호출을 제거했음을 설명하는 사후 조건이 없다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">f</span><span class="p">()</span>    <span class="c1">// 좀 더 낫다</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">MAX</span><span class="p">];</span>
        <span class="c1">// ...</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
        <span class="n">Ensures</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="note_11">Note</h5>
<p>사후 조건은 종종 함수의 목적을 기술하는 주석문에 비공식적으로 명시되어 있다. <code>Ensures()</code>를 사용함으로서 더 시스템적으로 검사하는 모습을 보여줄 수 있다.</p>
<h5 id="note_12">Note</h5>
<p>사후 조건은 사용되는 자료 구조의 상태처럼 반환된 결과에 간접적으로 영향을 미치는 무언가에 연관되어 있을 때 특히 중요하다.</p>
<h5 id="example_4">Example</h5>
<p>경합 조건을 피할 목적으로 <code>mutex</code>를 사용해 <code>Record</code>를 조작하는 함수를 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">mutex</span> <span class="n">m</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">manipulate</span><span class="p">(</span><span class="n">Record</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">)</span>    <span class="c1">// don&#39;t</span>
    <span class="p">{</span>
        <span class="n">m</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
        <span class="c1">// ... no m.unlock() ...</span>
    <span class="p">}</span>
</code></pre></div>


<p>여기서 <code>mutex</code>를 해제해야 한다는 언급을 "잊어"버렸는데, <code>mutex</code> 해제를 언급하지 않은 것이 단순히 버그인지 의도한 것인지 알 수가 없다.
사후 조건을 기술함으로서 언급을 명확하게 할 수 있다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">manipulate</span><span class="p">(</span><span class="n">Record</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">)</span>    <span class="c1">// 사후조건: m 은 함수가 종료된 후 lock이 해제되어있다.</span>
    <span class="p">{</span>
        <span class="n">m</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
        <span class="c1">// ... no m.unlock() ...</span>
    <span class="p">}</span>
</code></pre></div>


<p>이제 버그가 분명하게 보인다. (단, 주석을 읽는 사람에게만 보인다.)</p>
<p>더 나은 방법은 <a href="../Class/#Rc-raii">RAII</a>를 사용해 사후 조건("잠금을 해제해야 함")이 코드에 적용되도록 하는 것이다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">manipulate</span><span class="p">(</span><span class="n">Record</span><span class="o">&amp;</span> <span class="n">r</span><span class="p">)</span>    <span class="c1">// best</span>
    <span class="p">{</span>
        <span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">_</span> <span class="p">{</span><span class="n">m</span><span class="p">};</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="note_13">Note</h5>
<p>이상적으로, 사후 조건은 사용자들이 쉽게 볼 수 있도록 인터페이스/선언부에 기술해야 한다.
사용자들에게 언급되어야 하는 사후 조건만 인터페이스에 기술해야 한다.
내부 상태에 대한 사후 조건은 정의/구현부에만 기술한다.</p>
<h5 id="enforcement_6">Enforcement</h5>
<p>(적용 불가능) 이는 일반적으로 검사할 수 없는 이론적인 규칙(philosophical guide)이다.
특정 분야에 맞춰서 검사하는 (잠금 해제 검사처럼) 도구들은 이미 여러 도구에 존재한다.</p>
<h3 id="i8-ensures"><a name="Ri-ensures"></a>I.8: 사후 조건을 표현하고 싶다면 <code>Ensures()</code>를 사용하라</h3>
<h5 id="reason_7">Reason</h5>
<p>사후 조건이라는 것을 분명히 하기 위해, 그리고 분석 도구를 사용하기 위해서다.</p>
<h5 id="example_5">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">f</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">MAX</span><span class="p">];</span>
        <span class="c1">// ...</span>
        <span class="n">memset</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MAX</span><span class="p">);</span>
        <span class="n">Ensures</span><span class="p">(</span><span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="note_14">Note</h5>
<p>사후 조건은 주석문, <code>if</code>문, <code>assert()</code>문 등 다양한 방식으로 기술할 수 있다.
이는 일반적인 코드와 구분을 어렵게 만들고, 갱신하기 어렵게 만들고, 툴로 조작하기 어렵게 만들며 잘못된 의미를 가질 수도 있다.</p>
<h5 id="alternative_3">Alternative</h5>
<p>이 리소스는 반드시 해제되어야 한다" 형태의 사후 조건은 <a href="../Class/#Rc-raii">RAII</a>를 통해 가장 잘 나타낼 수 있다.</p>
<h5 id="note_15">Note</h5>
<p>이상적으로 <code>Ensures</code>는 인터페이스의 일부가 되어야 하지만, 쉽게 할 수 있는 작업이 아니다.
현재로서는 정의 부분(함수 본문)에 위치시킨다.
언어에서 이를 지원할 수 있게 된다면 (참고: <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0380r1.pdf">contract 제안서</a>) 표준에 맞는 사전조건, 사후조건, 단정문을 적용하게 될 것이다.</p>
<h5 id="enforcement_7">Enforcement</h5>
<p>(적용 불가능) 사후 조건을 단정할 수 있는 다양한 방식을 찾는 것은 실현 가능하지 않다. 
쉽게 확인할 수 있는 것들(<code>assert()</code>)에 대해 경고하는 것은 언어 기능이 없는 상황에서는 미심쩍을 수 있다.</p>
<h3 id="i9-concept"><a name="Ri-concepts"></a>I.9: 인터페이스가 템플릿이라면 컨셉(Concept)을 사용해서 매개 변수를 문서화하라</h3>
<h5 id="reason_8">Reason</h5>
<p>인터페이스를 정확하게, 그리고 (멀지 않은) 미래에 컴파일 타임 검사를 할 수 있게 만들어라.</p>
<h5 id="example_6">Example</h5>
<p>요구 사항 명세에 ISO Concept TS 스타일을 사용하라. </p>
<p>예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">Iter</span><span class="p">,</span> <span class="k">typename</span> <span class="n">Val</span><span class="o">&gt;</span>
    <span class="c1">// requires InputIterator&lt;Iter&gt; &amp;&amp; EqualityComparable&lt;ValueType&lt;Iter&gt;&gt;, Val&gt;</span>
    <span class="n">Iter</span> <span class="n">find</span><span class="p">(</span><span class="n">Iter</span> <span class="n">first</span><span class="p">,</span> <span class="n">Iter</span> <span class="n">last</span><span class="p">,</span> <span class="n">Val</span> <span class="n">v</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="note_16">Note</h5>
<p><code>//</code>가 제거되면 대부분의 컴파일러가 <code>requires</code> 구문을 검사할 수 있을 것이다.
현재 Concept은 GCC 6.1과 그 이후 버전에서 지원된다.</p>
<h5 id="see-also_1">See Also</h5>
<p><a href="../Templates/#SS-GP">제너릭 프로그래밍</a>과 <a href="../Templates/#SS-t-concepts">컨셉</a>을 참고하라</p>
<h5 id="enforcement_8">Enforcement</h5>
<p>(아직 적용 불가능) 언어 명세를 작성중이다. 언어 명세가 정의된 후, 비가변 템플릿 매개 변수가 (선언이나 <code>requires</code>문에 언급되지 않은) 컨셉으로 제한되지 않는다면 경고하라.</p>
<h3 id="i10"><a name="Ri-except"></a>I.10: 요구된 작업의 수행 실패를 알리기 위해 예외를 사용하라</h3>
<h5 id="reason_9">Reason</h5>
<p>시스템이나 계산 결과를 정의되지 않은(예측 불가능한) 상태로 둘 수 없으므로 오류를 무시해서는 안된다.</p>
<p>이는 오류의 주 발생지가 된다.</p>
<h5 id="example_7">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">printf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="p">...);</span>    <span class="c1">// 나쁜 코드: 출력에 실패하면 음수를 반환한다</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">F</span><span class="p">,</span> <span class="k">class</span> <span class="err">...</span><span class="nc">Args</span><span class="o">&gt;</span>
    <span class="c1">// 좋은 코드: 새 스레드를 시작하지 못하면 system_error를 던진다</span>
    <span class="k">explicit</span> <span class="kr">thread</span><span class="p">(</span><span class="n">F</span><span class="o">&amp;&amp;</span> <span class="n">f</span><span class="p">,</span> <span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">args</span><span class="p">);</span>
</code></pre></div>


<h5 id="note_17">Note</h5>
<p>오류란 무엇인가?</p>
<p>오류란 함수가 (사후 조건 설정을 포함해) 의도한 목적을 이룰 수 없는 것을 의미한다.
오류를 무시하는 코드를 호출하면 정의되지 않은 시스템 상태나 잘못된 결과를 야기할 수 있다.
예를 들어, 리모트 서버에 연결할 수 없는 경우 자체적으로 오류가 발생하지 않는다.
서버는 다양한 이유로 연결을 거부할 수 있다. 따라서 호출하는 쪽에서 결과를 확인할 수 있도록 반환해 주는 것이 자연스럽다.
그러나 연결에 실패하는 것을 오류로 간주할 생각이라면, 실패할 경우 예외를 던져야 한다.</p>
<h5 id="exception_2">Exception</h5>
<p>기존의 많은 인터페이스 함수들은 오류가 아닌 실제 상태 코드를 보고하기 위해 오류 코드(예를 들어, <code>errno</code>)를 사용한다. 이에 대해 별다른 대안이 없으므로 규칙을 위반하지는 않는다.</p>
<h5 id="alternative_4">Alternative</h5>
<p>만약 (예를 들어, 여러분의 코드가 예전 스타일의 처리되지 않은 포인터로 가득하거나 실시간 제약이 심각하기 때문에) 예외를 사용할 수 없다면, 한 쌍의 값을 반환하는 스타일을 사용하는 것을 고려해 보라:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="n">val</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">error_code</span><span class="p">;</span>
    <span class="n">tie</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">error_code</span><span class="p">)</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error_code</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ... handle the error or exit ...</span>
    <span class="p">}</span>
    <span class="c1">// ... use val ...</span>
</code></pre></div>


<p>안타깝게도 이런 코드 스타일은 초기화되지 않은 변수를 만들게 한다.
이에 대응하기 위한 <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0144r1.pdf">structured bindings</a>기능이 C++17에서부터 사용 가능하다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">auto</span> <span class="p">[</span><span class="n">val</span><span class="p">,</span> <span class="n">error_code</span><span class="p">]</span> <span class="o">=</span> <span class="n">do_something</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">error_code</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ... handle the error or exit ...</span>
    <span class="p">}</span>
    <span class="c1">// ... use val ...</span>
</code></pre></div>


<h5 id="note_18">Note</h5>
<p>"성능"이 예외를 사용하지 않아야 하는 타당한 이유라고는 생각하지 않는다.</p>
<ul>
<li>명시적인 오류 검사 및 처리는 종종 예외 처리만큼 많은 시간과 공간을 쓰기도 한다.</li>
<li>간결한 코드는 종종 예외 처리를 포함하더라도 더 좋은 성능을 갖는다. (프로그램과 최적화를 통해 실행 경로를 단순화한다)</li>
<li>성능이 중요한 코드의 좋은 규칙은 오류 검사를 코드의 핵심 부분 바깥으로 옮기는 것이다 (<a href="../Performance/#Rper-checking">검사</a>).</li>
<li>장기적으로 보면 정돈된(regular) 코드가 더 잘 최적화된다.</li>
<li>성능에 대해 지적하기 전에는 항상 신중하게 <a href="../Performance/#Rper-measure">측정하라</a>.</li>
</ul>
<h5 id="see-also_2">See Also</h5>
<p>사전 조건, 사후 조건의 위반 보고를 위한 <a href="#Ri-pre">I.5</a> 및 <a href="#Ri-post">I.7</a>.</p>
<h5 id="enforcement_9">Enforcement</h5>
<ul>
<li>(적용 불가능) 철저한 점검이 불가능한 철학적 가이드라인이다</li>
<li><code>errno</code>를 탐색한다</li>
</ul>
<h3 id="i11-t-t"><a name="Ri-raw"></a>I.11: 원시 포인터(<code>T*</code>) 혹은 참조(<code>T&amp;</code>)를 사용해 소유권을 전달하지 마라</h3>
<h5 id="reason_10">Reason</h5>
<p>호출하는 쪽이나 받는 쪽 중 누가 개체를 소유할 것인지 모른다면, 메모리 누수나 조기 파괴가 발생할 것이다.</p>
<h5 id="example_8">Example</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">X</span><span class="o">*</span> <span class="nf">compute</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>    <span class="c1">// don&#39;t</span>
    <span class="p">{</span>
        <span class="n">X</span><span class="o">*</span> <span class="n">res</span> <span class="o">=</span> <span class="k">new</span> <span class="n">X</span><span class="p">{};</span>
        <span class="c1">// ...</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<p>반환된 <code>X</code>를 누가 삭제할 것인가? 만약 레퍼런스를 반환한다면 문제는 더 어려워질 것이다.
결과가 값으로 반환되었다고 고려해 보자 (결과로 반환되는 값의 크기가 크다면 이동 문법을 사용하라):</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">compute</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>  <span class="c1">// good</span>
    <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
        <span class="c1">// ...</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<h5 id="alternative_5">Alternative</h5>
<p><a href="../Resource/#Rr-smartptrparam">소유권 전달</a>은 배타적 소유를 위한 <code>unique_ptr</code>와 공유를 위한 <code>shared_ptr</code> 같은 스마트 포인터를 사용하라.
하지만 이는 개체 그 자체를 반환하는 것보다 덜 아름답고 덜 효율적이다.
오직 참조로 사용하도록 할때만 스마트 포인터를 사용하라.</p>
<p>ABI 호환성 요구 사항 또는 리소스 부족으로 인해 오래된 코드를 수정할 수 없는 경우가 있다.
이 경우, <a href="../GSL/#S-gsl">가이드라인 지원 라이브러리</a>의 <code>owner</code>를 사용해 포인터의 소유권을 표시하라:</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">owner</span><span class="o">&lt;</span><span class="n">X</span><span class="o">*&gt;</span> <span class="n">compute</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>    <span class="c1">// It is now clear that ownership is transferred</span>
    <span class="p">{</span>
        <span class="n">owner</span><span class="o">&lt;</span><span class="n">X</span><span class="o">*&gt;</span> <span class="n">res</span> <span class="o">=</span> <span class="k">new</span> <span class="n">X</span><span class="p">{};</span>
        <span class="c1">// ...</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div>


<p>위의 코드는 분석 툴에게 <code>res</code>가 소유권자라고 알려준다.
즉, 이 값은 <code>return</code>을 통해 행해진 것처럼 <code>delete</code>되거나 다른 소유권자에게 넘겨줘야 한다.</p>
<p><code>owner</code>는 리소스 핸들의 구현에서 비슷하게 사용된다.</p>
<h5 id="note_19">Note</h5>
<p>처리되지 않은 포인터(또는 반복자)로 전달된 모든 개체는 호출자가 소유한 것으로 간주되므로 호출자가 수명을 처리한다.<br />
다른 관점에서 보자면: 소유권을 전달하는 API는 포인터를 전달하는 API에 비해 상대적으로 적다. 
그러니 일반적으로 내재된(default) 의미는 "소유권을 전달하지 않는" 것이다.</p>
<h5 id="see-also_3">See Also</h5>
<ul>
<li><a href="../Functions/#Rf-conventional">인자 전달</a></li>
<li><a href="../Resource/#Rr-smartptrparam">스마트 포인터의 사용</a></li>
<li><a href="../Functions/#Rf-value-return">값 반환</a></li>
</ul>
<h5 id="enforcement_10">Enforcement</h5>
<ul>
<li>(간단함) <code>owner</code>가 아닌 처리되지 않은 포인터의 <code>delete</code>에 대해 경고하라</li>
<li>(간단함) 모든 코드 경로에서 <code>owner</code> 포인터를 <code>reset</code>하거나 명시적으로 <code>delete</code>를 실패하게 되면 경고하라</li>
<li>(간단함) <code>new</code>의 반환 값이나 포인터 타입의 반환 값을 갖는 함수 호출이 처리되지 않은 포인터에 할당되면 경고하라</li>
</ul>
<h3 id="i12-null-not_null"><a name="Ri-nullptr"></a>I.12: null이 되어선 안되는 포인터는 <code>not_null</code>로 선언하라</h3>
<h5 id="reason_11">Reason</h5>
<p><code>nullptr</code> 역참조 오류를 피하기 위해서다.
그리고 <code>nullptr</code>를 반복해서 검사하는 경우를 피해 성능을 향상시키기 위해서다.</p>
<h5 id="example_9">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">p</span><span class="p">);</span>            <span class="c1">// nullptr를 사용할 수 있는지 분명하지 않다.</span>

    <span class="n">length</span><span class="p">(</span><span class="k">nullptr</span><span class="p">);</span>                      <span class="c1">// 이렇게 사용해도 괜찮을까?</span>

    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">not_null</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*&gt;</span> <span class="n">p</span><span class="p">);</span>  <span class="c1">// 좀 더 낫다: p가 nullptr가 되면 안된다는 것을 알 수 있다.</span>

    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">p</span><span class="p">);</span>            <span class="c1">// p가 nullptr가 될수 있다고 가정해야 한다.</span>
</code></pre></div>


<p>소스 코드에 의도를 명시함으로써, 컴파일러와 툴이 정적 분석을 통해 일부 오류 클래스를 찾아내는 등의 보다 나은 진단을 제공하고 분기 및 널(NULL) 검사를 제거하는 등의 최적화 작업을 수행할 수 있다.</p>
<h5 id="note_20">Note</h5>
<p><code>not_null</code>은 <a href="../GSL/#S-gsl">가이드라인 지원 라이브러리</a>에 정의되어 있다.</p>
<h5 id="note_21">Note</h5>
<p><code>char</code>에 대한 포인터가 C-스타일 문자열(<code>\0</code>으로 끝나는 문자열)을 가리키고 있다는 가정은 여전히 암묵적이며 혼란과 오류를 발생시키는 원인이 될 수 있다. <code>const char*</code>보다는 <code>czstring</code>을 사용하라.</p>
<div class="codehilite"><pre><span></span><code>    <span class="c1">// we can assume that p cannot be nullptr</span>
    <span class="c1">// we can assume that p points to a zero-terminated array of characters</span>
    <span class="kt">int</span> <span class="nf">length</span><span class="p">(</span><span class="n">not_null</span><span class="o">&lt;</span><span class="n">zstring</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">);</span>
</code></pre></div>


<p>물론 <code>length()</code>는 <code>std::strlen()</code>이다.</p>
<h5 id="enforcement_11">Enforcement</h5>
<ul>
<li>(간단함) ((기본사항)) 함수가 모든 제어-흐름 경로에서 포인터 매개 변수에 접근하기 전에 <code>nullptr</code>인지 검사한다면, <code>not_null</code>으로 선언되어야 한다는 경고하라</li>
<li>(복잡함) 포인터 반환 값을 갖는 함수가 모든 반환 경로에서 <code>nullptr</code>이 아닌지 확인한다면, 리턴 타입을 <code>not_null</code>으로 선언해야 된다는 경고하라</li>
</ul>
<h3 id="i13"><a name="Ri-array"></a>I.13: 배열을 단일 포인터로 전달하지 마라</h3>
<h5 id="reason_12">Reason</h5>
<p>(포인터, 크기)-스타일 인터페이스는 오류가 발생하기 쉽다.
또한 (배열에 대한) 일반 포인터는 피호출자에서 크기를 결정할 수 있도록 몇 가지 관례에 의존해야 한다.</p>
<h5 id="example_10">Example</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">copy_n</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">*</span> <span class="n">q</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span> <span class="c1">// [p:p+n)에서 [q:q+n)로 복사한다</span>
</code></pre></div>


<p>만약 <code>q</code>가 가리키는 배열의 원소 갯수가 <code>n</code>보다 적다면 어떻게 될까? 관계없는 메모리를 덮어쓰게 된다.<br />
만약 <code>p</code>가 가리키는 배열의 원소 갯수가 <code>n</code>보다 적다면 어떻게 될까? 관계없는 메모리를 읽을 것이다.<br />
어느 쪽이나 정의되지 않은 동작을 수행하거나 매우 불쾌한 버그가 발생할 수 있다.</p>
<h5 id="alternative_6">Alternative</h5>
<p>명시적인 범위(<code>span</code>) 사용을 고려해 보라:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">copy</span><span class="p">(</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">r</span><span class="p">,</span> <span class="n">span</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">r2</span><span class="p">);</span> <span class="c1">// r에서 r2로 복사한다</span>
</code></pre></div>


<h5 id="example-bad_6">Example, bad</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">draw</span><span class="p">(</span><span class="n">Shape</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>  <span class="c1">// 허접한(poor) 인터페이스는 허접한 코드를 낳는다.</span>
    <span class="n">Circle</span> <span class="n">arr</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
    <span class="c1">// ...</span>
    <span class="n">draw</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</code></pre></div>


<p><code>n</code>의 인수로 <code>10</code>을 전달하는 것은 실수일 수 있다. 가장 일반적인 관례는 [<code>0</code>:<code>n</code>)이라고 가정하는 것이지만, 이러한 내용이 어디에도 언급되어 있지 않다.
더 나쁜 부분은 어쨌든 <code>draw()</code> 호출이 컴파일된다는 것이다.
배열에서 포인터로의 암시적 변환(배열 부패(array decay))이 있었고, <code>Circle</code>에서 <code>Shape</code>로의 또 다른 암시적 변환이 있었다.
<code>draw()</code>가 그 배열을 통해 안전하게 반복문을 수행할 수 있는 방법은 없다.
왜냐하면 요소의 크기를 알 수 있는 방법이 없기 때문이다.</p>
<h5 id="alternative_7">Alternative</h5>
<p>요소의 크기한계를 보장하고 위험한 암시적 변환을 방지하는 지원 클래스를 사용하라.</p>
<p>예를 들어:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">draw2</span><span class="p">(</span><span class="n">span</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">);</span>
    <span class="n">Circle</span> <span class="n">arr</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
    <span class="c1">// ...</span>
    <span class="n">draw2</span><span class="p">(</span><span class="n">span</span><span class="o">&lt;</span><span class="n">Circle</span><span class="o">&gt;</span><span class="p">(</span><span class="n">arr</span><span class="p">));</span>   <span class="c1">// 원소의 개수를 알 수 있다(deduce)</span>
    <span class="n">draw2</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>                 <span class="c1">// 원소 타입과 배열의 길이를 알 수 있다</span>

    <span class="kt">void</span> <span class="nf">draw3</span><span class="p">(</span><span class="n">span</span><span class="o">&lt;</span><span class="n">Shape</span><span class="o">&gt;</span><span class="p">);</span>
    <span class="n">draw3</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>    <span class="c1">// 오류: Circle[10]는 span&lt;Shape&gt;가 될 수 없다.</span>
</code></pre></div>


<p>이 <code>draw2()</code>는 같은 양의 정보를 <code>draw()</code>에 전달하지만, 명시적으로 <code>Circle</code>이 되어야 한다는 사실을 알 수 있다.</p>
<h5 id="exception_3">Exception</h5>
<p><code>zstring</code>과 <code>czstring</code>을 사용해 C-스타일의 <code>\0</code>로 끝나는 문자열을 나타내라.
하지만 이렇게 할때는 범위 오류가 발생하지 않도록 <a href="../GSL/#GSL">GSL</a>의 <code>string_span</code>를 사용하라.</p>
<h5 id="enforcement_12">Enforcement</h5>
<ul>
<li>(간단함) ((경계)) 배열 타입에서 포인터 타입으로의 암시적 변환에 의존하는 표현식에 대해 경고를 표시하라. string/czstring 포인터 타입에 대해서는 예외를 허용한다.</li>
<li>(간단함) ((경계)) 포인터 타입의 값을 가져오는 포인터 타입의 표현식에 대한 산술 연산에 대해 경고를 표시하라. zstring/czstring 포인터 타입에 대해서는 예외를 허용한다.</li>
</ul>
<h3 id="i22"><a name="Ri-global-init"></a>I.22: 전역 개체가 복잡하게 초기화되지 않도록 하라</h3>
<h5 id="reason_13">Reason</h5>
<p>복잡한 초기화는 실행 순서를 불분명(undefined order)하게 한다.</p>
<h5 id="example_11">Example</h5>
<div class="codehilite"><pre><span></span><code>    <span class="c1">// file1.c</span>
    <span class="k">extern</span> <span class="k">const</span> <span class="n">X</span> <span class="n">x</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">Y</span> <span class="n">y</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>   <span class="c1">// read x; write y</span>

    <span class="c1">// file2.c</span>
    <span class="k">extern</span> <span class="k">const</span> <span class="n">Y</span> <span class="n">y</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">X</span> <span class="n">x</span> <span class="o">=</span> <span class="n">g</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>   <span class="c1">// read y; write x</span>
</code></pre></div>


<p><code>x</code>와 <code>y</code>가 서로 다른 파일(translation units)에 있기 때문에, <code>f()</code>와 <code>g()</code>의 호출 순서는 알 수 없다;
둘 중 하나가 초기화되지 않은 <code>const</code>에 접근할 수 있다.
이는 전역 개체들의 초기화 순서 문제가 <em>변수</em>에만 한정된것이 아님을 보여준다.</p>
<h5 id="note_22">Note</h5>
<p>동시성을 고려한 코드에서 초기화 순서 문제는 특히 다루기가 어렵다.
대부분의 경우 전역 개체를 사용하지 않는 것이 최선의 해결책이다.</p>
<h5 id="enforcement_13">Enforcement</h5>
<ul>
<li>비 <code>constexpr</code> 함수를 호출하는 전역 초기화를 지적한다.</li>
<li><code>extern</code> 개체에 접근하는 전역 초기화를 지적한다.</li>
</ul>
<h3 id="i23"><a name="Ri-nargs"></a>I.23: 함수 인자 개수를 최소로 유지하라</h3>
<h5 id="reason_14">Reason</h5>
<p>인자 갯수가 많으면 혼란을 일으킬 수 있다.
인자를 많이 전달하는 것은 다른 방법에 비해 비용이 많이 든다.</p>
<h5 id="discussion">Discussion</h5>
<p>함수가 너무 많은 매개변수를 가질때는 보통 2가지 이유가 있다:</p>
<ol>
<li><em>추상화 되지 않음</em><br />
   추상화를 하지 않았기 때문에 불변조건이 있는 단일 개체가 아니라 복잡하고 개별적인 형태로 값들이 전달되고 있는 것이다.
   이는 인자 목록을 길게 만들 뿐만 아니라 인자들이 불변조건으로 보호되지 않기 때문에 오류로 이어질 가능성도 높다.</li>
<li><em>"하나의 함수가 한가지 일만 한다"는 규칙을 위반"</em><br />
   해당 함수가 하나를 초과하는 작업을 하고 있다. 이는 고쳐서 다시 작성해야(refactor) 한다.</li>
</ol>
<h5 id="example_12">Example</h5>
<p>표준 라이브러리 <code>merge()</code>는 편하게 처리할 수 있는 한계에 있다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">InputIterator2</span><span class="p">,</span> <span class="k">class</span> <span class="nc">OutputIterator</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Compare</span><span class="o">&gt;</span>
    <span class="n">OutputIterator</span> <span class="n">merge</span><span class="p">(</span><span class="n">InputIterator1</span> <span class="n">first1</span><span class="p">,</span> <span class="n">InputIterator1</span> <span class="n">last1</span><span class="p">,</span>
                         <span class="n">InputIterator2</span> <span class="n">first2</span><span class="p">,</span> <span class="n">InputIterator2</span> <span class="n">last2</span><span class="p">,</span>
                         <span class="n">OutputIterator</span> <span class="n">result</span><span class="p">,</span> <span class="n">Compare</span> <span class="n">comp</span><span class="p">);</span>
</code></pre></div>


<p>앞서 지적한 1번 문제점에 해당한다 -- 
추상화가 되지 않은 것이다. STL에서 범위(추상화된 개념)를 전달하지 않고 반복자 쌍(pair)들을 전달한다. 이는 캡슐화되지 않은 값들(unencapsulated component values)에 해당한다.</p>
<p>여기에는 4개의 템플릿 인자와 6개의 함수 인자가 있다.
가장 자주 보이고 단순한 사용법을 단순화하기 위해, 인자의 기본 비교를 <code>&lt;</code>로 정할 수 있다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputIterator1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">InputIterator2</span><span class="p">,</span> <span class="k">class</span> <span class="nc">OutputIterator</span><span class="o">&gt;</span>
    <span class="n">OutputIterator</span> <span class="n">merge</span><span class="p">(</span><span class="n">InputIterator1</span> <span class="n">first1</span><span class="p">,</span> <span class="n">InputIterator1</span> <span class="n">last1</span><span class="p">,</span>
                         <span class="n">InputIterator2</span> <span class="n">first2</span><span class="p">,</span> <span class="n">InputIterator2</span> <span class="n">last2</span><span class="p">,</span>
                         <span class="n">OutputIterator</span> <span class="n">result</span><span class="p">);</span>
</code></pre></div>


<p>이렇게 한다고 해서 전체적인 복잡성이 줄어들지는 않지만 사용자 입장에서 볼 때는 복잡성이 줄어든 것처럼 보인다.
실제로 인자 갯수를 줄이려면 인자를 좀 더 높은 수준의 추상화로 묶어야 한다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">InputRange1</span><span class="p">,</span> <span class="k">class</span> <span class="nc">InputRange2</span><span class="p">,</span> <span class="k">class</span> <span class="nc">OutputIterator</span><span class="o">&gt;</span>
    <span class="n">OutputIterator</span> <span class="n">merge</span><span class="p">(</span><span class="n">InputRange1</span> <span class="n">r1</span><span class="p">,</span> <span class="n">InputRange2</span> <span class="n">r2</span><span class="p">,</span> <span class="n">OutputIterator</span> <span class="n">result</span><span class="p">);</span>
</code></pre></div>


<p>인자를 "묶어서" 그룹화하는 것은 인자의 갯수를 줄이고 검사할 기회를 늘리는 일반적인 기법이다.</p>
<p>다른 방법으로, ISO TS에서 정의한 컨셉(concepts)을 사용할수도 있다.
세 타입이 merge에 사용될 수 있어야 한다고 정의하는 것이다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="n">Mergeable</span><span class="p">{</span><span class="n">In1</span><span class="p">,</span> <span class="n">In2</span><span class="p">,</span> <span class="n">Out</span><span class="p">}</span>
    <span class="n">OutputIterator</span> <span class="n">merge</span><span class="p">(</span><span class="n">In1</span> <span class="n">r1</span><span class="p">,</span> <span class="n">In2</span> <span class="n">r2</span><span class="p">,</span> <span class="n">Out</span> <span class="n">result</span><span class="p">);</span>
</code></pre></div>


<h5 id="example_13">Example</h5>
<p>안전성 분석(safety profile)은 아래와 같은 코드를 </p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">some_ints</span><span class="p">,</span> <span class="kt">int</span> <span class="n">some_ints_length</span><span class="p">);</span>  <span class="c1">// 나쁨: C 스타일, 안전하지 않다</span>
</code></pre></div>


<p>아래 처럼 바꾸도록 권장한다</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="n">gsl</span><span class="o">::</span><span class="n">span</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">some_ints</span><span class="p">);</span>              <span class="c1">// 좋음: 안전하고 범위를 검사한다</span>
</code></pre></div>


<p>여기서, 추상화를 사용하면 안전성과 견고함을 얻을 수 있다. 동시에 자연스럽게 인자의 수를 줄이게 된다.</p>
<h5 id="note_23">Note</h5>
<p>얼마나 많은 인자가 있어야 너무 많다고 말할 수 있을까? 인자가 4개라면 많다고 말할 수 있다.
4개의 인자로 가장 잘 표현할 수 있는 함수들도 있지만, 많지는 않다.</p>
<h5 id="alternative_8">Alternative</h5>
<p>더 나은 추상화: 인자를 의미있는 개체로 그룹화하고 개체를 전달하라. (값에 의한 전달 또는 레퍼런스에 의한 전달)</p>
<p>더 적은 인자 갯수로 가장 일반적인 형태의 호출을 할 수 있는 디폴트 인자나 오버로드를 사용하라.</p>
<h5 id="enforcement_14">Enforcement</h5>
<ul>
<li>범위 또는 뷰가 아닌 동일한 타입의 반복자(포인터 포함)를 2개 이상 선언하는 함수가 있다면 경고하라.</li>
<li>(적용 불가능) 철저한 점검이 불가능한 철학적 가이드라인이다.</li>
</ul>
<h3 id="i24"><a name="Ri-unrelated"></a>I.24: 같은 타입의 관련없는 매개 변수가 붙어있지 않도록 하라</h3>
<h5 id="reason_15">Reason</h5>
<p>실수로 동일 타입의 인접한 인수를 쉽게 바꿀 수 있다.</p>
<h5 id="example-bad_7">Example, bad</h5>
<p>다음을 고려해 보자:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">copy_n</span><span class="p">(</span><span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">*</span> <span class="n">q</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>  <span class="c1">// copy from [p:p + n) to [q:q + n)</span>
</code></pre></div>


<p>위 코드는 K&amp;R C-스타일 인터페이스의 적절하지 못한 변형이다. "to"와 "from" 인수를 쉽게 바꿀 수 있다.</p>
<p>"from" 인자에 <code>const</code>를 사용하라:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">copy_n</span><span class="p">(</span><span class="k">const</span> <span class="n">T</span><span class="o">*</span> <span class="n">p</span><span class="p">,</span> <span class="n">T</span><span class="o">*</span> <span class="n">q</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>  <span class="c1">// copy from [p:p + n) to [q:q + n)</span>
</code></pre></div>


<h5 id="exception_4">Exception</h5>
<p>만약 매개변수들의 순서가 중요하지 않다면, 문제가 없다:</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</code></pre></div>


<h5 id="alternative_9">Alternative</h5>
<p>배열을 포인터로 전달하지 말고 범위를 나타내는 개체(예를 들어, <code>span</code>)로 전달하라.</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">void</span> <span class="nf">copy_n</span><span class="p">(</span><span class="n">span</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">p</span><span class="p">,</span> <span class="n">span</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">q</span><span class="p">);</span>  <span class="c1">// copy from p to q</span>
</code></pre></div>


<h5 id="alternative_10">Alternative</h5>
<p><code>struct</code>를 매개변수 타입으로 정의하고 각 필드의 이름을 매개변수들에 따라 부여하라.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">struct</span> <span class="n">SystemParams</span> <span class="p">{</span>
        <span class="n">string</span> <span class="n">config_file</span><span class="p">;</span>
        <span class="n">string</span> <span class="n">output_path</span><span class="p">;</span>
        <span class="n">seconds</span> <span class="n">timeout</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kt">void</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">SystemParams</span> <span class="n">p</span><span class="p">);</span>
</code></pre></div>


<p>이는 호출 지점에서 (멤버들의) 이름을 통해 값을 부여함으로써 
나중에 코드를 읽을 사람들에게 호출을 이해하기 쉽게 한다.</p>
<h5 id="enforcement_15">Enforcement</h5>
<p>(간단함) 연속하는 두 매개 변수가 동일한 타입을 공유하는 경우 경고를 표시하라.</p>
<h3 id="i25-hierarchy"><a name="Ri-abstract"></a>I.25: 클래스 계층(hierarchy)에 대한 인터페이스로 추상 클래스를 사용하라</h3>
<h5 id="reason_16">Reason</h5>
<p>추상 클래스(abstract class)는 상태가 있는 부모 클래스보다 안정적이다.</p>
<h5 id="example-bad_8">Example, bad</h5>
<p>당신은 <code>Shape</code>예제를 쓸 것이라고 예상했을 것이다. :-)</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>  <span class="c1">// bad: interface class loaded with data</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">Point</span> <span class="n">center</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">c</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">draw</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="k">private</span><span class="o">:</span>
        <span class="n">Point</span> <span class="n">c</span><span class="p">;</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">outline</span><span class="p">;</span>
        <span class="n">Color</span> <span class="n">col</span><span class="p">;</span>
    <span class="p">};</span>
</code></pre></div>


<p>이렇게 하면 파생된 모든 클래스가 중심을 계산하게 된다.
비록 중요하지 않고 중심이 사용되지 않더라도 말이다.
비슷하게, 모든 <code>Shape</code>가 <code>Color</code>를 갖고 있는 것은 아니며 많은 <code>Shape</code>들은 일련의 <code>Point</code>로 정의된 윤곽선없이 가장 잘 표현된다.
추상 클래스는 사용자가 그러한 클래스를 작성하지 못하도록 만들기 위해 고안되었다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>    <span class="c1">// better: Shape is a pure interface</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">virtual</span> <span class="n">Point</span> <span class="n">center</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>   <span class="c1">// pure virtual functions</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="c1">// ...</span>
        <span class="c1">// ... no data members ...</span>
        <span class="c1">// ...</span>
        <span class="k">virtual</span> <span class="o">~</span><span class="n">Shape</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="p">};</span>
</code></pre></div>


<h5 id="enforcement_16">Enforcement</h5>
<p>(간단함) <code>C</code> 클래스를 가리키는 포인터가 <code>C</code>의 베이스를 가리키는 포인터에 할당되고 베이스 클래스에 데이터 멤버가 있으면 경고하라.</p>
<h3 id="i26-abi-c"><a name="Ri-abi"></a>I.26: 크로스 컴파일러 ABI를 원한다면 C 스타일 코드를 사용하라</h3>
<h5 id="reason_17">Reason</h5>
<p>컴파일러마다 클래스, 예외 처리, 함수 이름 및 기타 구현 세부 사항에 대해 서로 다른 바이너리 레이아웃을 구현한다.</p>
<h5 id="exception_5">Exception</h5>
<p>신중하게 선택한 몇 가지 고급 수준의 C++ 타입을 사용해 인터페이스를 신중하게 만들 수 있다.</p>
<h5 id="exception_6">Exception</h5>
<p>일반적인 ABI는 일부 플랫폼에서 점점 더 엄격한 제한으로부터 벗어나고 있다.</p>
<h5 id="note_24">Note</h5>
<p>단일 컴파일러를 사용하는 경우 인터페이스에서 C++ 전체를 사용할 수 있다. 새 컴파일러 버전으로 업그레이드 한 후에는 다시 컴파일해야 할 수 있다.</p>
<h5 id="enforcement_17">Enforcement</h5>
<p>(적용 불가능) 인터페이스가 ABI의 일부가 되는 부분을 확실하게 식별하기는 어렵다.</p>
<h3 id="i27-stable-abi-pimpl-idiom"><a name="Ri-pimpl"></a>I.27: 변화가 적은(stable) ABI를 원한다면, Pimpl idiom 사용을 고려하라</h3>
<h5 id="reason_18">Reason</h5>
<p>private 데이터는 클래스의 메모리 레이아웃에 영향을 주고 멤버 함수들은 중복정의에 영향을 미치기 때문에, 이런 구현 세부사항이 바뀌는 경우엔 사용자 코드까지 다시 컴파일되어야 한다.
구현에 대한 포인터(Pimpl)를 사용하는 다형적이지 않은 인터페이스는 간접 참조하는 비용만으로 구현이 바뀌었을때의 여파를 사용자로부터 분리시킬 수 있다.</p>
<h5 id="example_14">Example</h5>
<p>인터페이스 (widget.h)</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">widget</span> <span class="p">{</span>
        <span class="k">class</span> <span class="nc">impl</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">impl</span><span class="o">&gt;</span> <span class="n">pimpl</span><span class="p">;</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="kt">void</span> <span class="n">draw</span><span class="p">();</span> <span class="c1">// public API that will be forwarded to the implementation</span>
        <span class="n">widget</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// defined in the implementation file</span>
        <span class="o">~</span><span class="n">widget</span><span class="p">();</span>   <span class="c1">// defined in the implementation file, where impl is a complete type</span>
        <span class="n">widget</span><span class="p">(</span><span class="n">widget</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
        <span class="n">widget</span><span class="p">(</span><span class="k">const</span> <span class="n">widget</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
        <span class="n">widget</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="o">&amp;&amp;</span><span class="p">);</span> <span class="c1">// defined in the implementation file</span>
        <span class="n">widget</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">widget</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="p">};</span>
</code></pre></div>


<p>구현 (widget.cpp)</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">widget</span><span class="o">::</span><span class="n">impl</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span><span class="p">;</span> <span class="c1">// private data</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="kt">void</span> <span class="n">draw</span><span class="p">(</span><span class="k">const</span> <span class="n">widget</span><span class="o">&amp;</span> <span class="n">w</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
        <span class="n">impl</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="o">:</span> <span class="n">n</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">{}</span>
    <span class="p">};</span>
    <span class="kt">void</span> <span class="n">widget</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span> <span class="p">{</span> <span class="n">pimpl</span><span class="o">-&gt;</span><span class="n">draw</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span> <span class="p">}</span>
    <span class="n">widget</span><span class="o">::</span><span class="n">widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="o">:</span> <span class="n">pimpl</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">impl</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">)}</span> <span class="p">{}</span>
    <span class="n">widget</span><span class="o">::~</span><span class="n">widget</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="n">widget</span><span class="o">&amp;</span> <span class="n">widget</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">widget</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</code></pre></div>


<h5 id="notes">Notes</h5>
<p>이런 방법을 적용했을때의 영향을 이해하려면 
<a href="https://herbsutter.com/gotw/_100/">GOTW #100</a>와 <a href="http://en.cppreference.com/w/cpp/language/pimpl">cppreference</a>를 함께 보라.</p>
<h5 id="enforcement_18">Enforcement</h5>
<p>(적용 불가능) 어느 부분이 ABI의 인터페이스 부분인지 확실히 구분하기 힘들다.</p>
<h3 id="i30"><a name="Ri-encapsulate"></a>I.30: 규칙을 위반하는 코드는 캡슐화하라</h3>
<h5 id="reason_19">Reason</h5>
<p>코드를 단순하고 안전하게 유지한다.
때때로 논리적이거나 성능상의 이유로 지저분하고 안전하지 않으며 오류를 일으키기 쉬운 기술들이 필요할 때도 있다.
그렇다면, 그 코드들은 인터페이스에 노출시키지 말고 지역적으로 유지하라. 이는 보다 많은 프로그래머들이 세세하게 알 필요가 없도록 한다.
구현의 복잡함은 인터페이스를 통해 사용자 코드에 영향을 주어서는 안된다.</p>
<h5 id="example_15">Example</h5>
<p>(<code>main</code>의 인자처럼) 특정 형태의 입력에 의존적인 프로그램을 생각해보라.
이런 프로그램은 파일, 커맨드라인, 혹은 표준 입력으로부터 입력을 받아야 한다.
아마 이런 코드를 작성할 것이다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="kt">bool</span> <span class="n">owned</span><span class="p">;</span>
    <span class="n">owner</span><span class="o">&lt;</span><span class="n">istream</span><span class="o">*&gt;</span> <span class="n">inp</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">std_in</span><span class="p">:</span>        <span class="n">owned</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="n">inp</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cin</span><span class="p">;</span>                       <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">command_line</span><span class="p">:</span>  <span class="n">owned</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>  <span class="n">inp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">istringstream</span><span class="p">{</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]};</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">file</span><span class="p">:</span>          <span class="n">owned</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>  <span class="n">inp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ifstream</span><span class="p">{</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]};</span>      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">istream</span><span class="o">&amp;</span> <span class="n">in</span> <span class="o">=</span> <span class="o">*</span><span class="n">inp</span><span class="p">;</span>
</code></pre></div>


<p>이는 <a href="../Expr/#Res-always">초기화되지 않은 변수를 피하라</a>는 규칙을 위반한다.
또한 <a href="#Ri-raw">소유권을 무시</a>하며, <a href="../Expr/#Res-magic">마법 상수를 피하라</a>는 규칙에도 반한다.
특히, 이 코드는 누군가 어딘가에 아래와 같은 코드를 작성해야 한다는 점을 기억해야만 한다. </p>
<div class="codehilite"><pre><span></span><code>    <span class="k">if</span> <span class="p">(</span><span class="n">owned</span><span class="p">)</span> <span class="k">delete</span> <span class="n">inp</span><span class="p">;</span>
</code></pre></div>


<p>이 예제에 한해서는 <code>unique_ptr</code>를 사용해 <code>cin</code>에 필요한 소멸 코드를 처리할 수 있다.
하지만 이 문제를 접하기 쉬운 초심자(novices)에게는 그런 방법을 기대하기 어렵다. 
동시에 이 코드는 정적인 속성(이 예시에서는, 소유권)이 실행 시간에 관리되는 일반적인 문제의 한 사례에 불과하다.</p>
<p>보편적으로 자주 보이고 안전한 예시들은 정적으로 해결할 수 있기 때문에, 그런 코드에는 비용과 복잡성을 더하고 싶지 않다.
하지만 보편적이지 않고, 덜 안전한, 그리고 불필요하게 비용이 드는 경우에도 대처해야 한다.
일례가 <a href="http://www.stroustrup.com/resource-model.pdf">Str15</a>에서 다루어진다.</p>
<p>결론적으로, 우리는 이런 클래스를 작성할 것이다.</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">class</span> <span class="nc">Istream</span> <span class="p">{</span> <span class="p">[[</span><span class="n">gsl</span><span class="o">::</span><span class="n">suppress</span><span class="p">(</span><span class="n">lifetime</span><span class="p">)]]</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">enum</span> <span class="n">Opt</span> <span class="p">{</span> <span class="n">from_line</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">};</span>
        <span class="n">Istream</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
        <span class="n">Istream</span><span class="p">(</span><span class="n">zstring</span> <span class="n">p</span><span class="p">)</span> <span class="o">:</span><span class="n">owned</span><span class="p">{</span><span class="nb">true</span><span class="p">},</span> <span class="n">inp</span><span class="p">{</span><span class="k">new</span> <span class="n">ifstream</span><span class="p">{</span><span class="n">p</span><span class="p">}}</span> <span class="p">{}</span>            <span class="c1">// read from file</span>
        <span class="n">Istream</span><span class="p">(</span><span class="n">zstring</span> <span class="n">p</span><span class="p">,</span> <span class="n">Opt</span><span class="p">)</span> <span class="o">:</span><span class="n">owned</span><span class="p">{</span><span class="nb">true</span><span class="p">},</span> <span class="n">inp</span><span class="p">{</span><span class="k">new</span> <span class="n">istringstream</span><span class="p">{</span><span class="n">p</span><span class="p">}}</span> <span class="p">{}</span>  <span class="c1">// read from command line</span>
        <span class="o">~</span><span class="n">Istream</span><span class="p">()</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="n">owned</span><span class="p">)</span> <span class="k">delete</span> <span class="n">inp</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">operator</span> <span class="n">istream</span><span class="o">&amp;</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="o">*</span><span class="n">inp</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">private</span><span class="o">:</span>
        <span class="kt">bool</span> <span class="n">owned</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="n">istream</span><span class="o">*</span> <span class="n">inp</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cin</span><span class="p">;</span>
    <span class="p">};</span>
</code></pre></div>


<p>이제 동적으로 결정되는 <code>istream</code>의 소유권이 캡슐화 되었다.
아마 실제로는 잠재적인 오류를 검사하는 코드가 더 추가될 것이다.</p>
<h5 id="enforcement_19">Enforcement</h5>
<ul>
<li>어렵다. 어떤 (규칙을 위반하는) 코드가 필수적인지 결정하기 어렵다</li>
<li>인터페이스에서 규칙 위반을 허용하도록 제약하는 경우 지적한다.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../GSL/" title="GSL" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                GSL
              </div>
            </div>
          </a>
        
        
          <a href="../Naming/" title="Naming" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Naming
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) Standard C++ Foundation and its contributors
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>